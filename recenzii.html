<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Recenzii Energize</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #fefae0; padding: 20px; }
    h2 { color: #ff9800; text-align: center; }
    form { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px #ccc; max-width: 500px; margin: auto; }
    input, textarea, select, button {
      width: 100%; margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 4px;
    }
    button { background: #ff9800; color: white; font-weight: bold; border: none; cursor: pointer; }
    .success { background: #dff0d8; padding: 10px; border-radius: 4px; color: #3c763d; margin-top: 10px; text-align: center; }
  </style>
</head>
<body>

<h2>LasƒÉ o recenzie</h2>
<form onsubmit="trimiteRecenzie(event)">
  <input type="text" id="name" placeholder="Nume" required>
  <textarea id="message" placeholder="Mesajul tƒÉu" required></textarea>
  <select id="rating" required>
    <option value="">Rating</option>
    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
    <option value="3">‚≠ê‚≠ê‚≠ê</option>
    <option value="2">‚≠ê‚≠ê</option>
    <option value="1">‚≠ê</option>
  </select>
  <button type="submit">Trimite recenzia</button>
  <div id="confirmare" class="success" style="display:none;">Recenzia a fost trimisƒÉ »ôi emailul a fost expediat!</div>
</form>

<script>
  // üîß Config Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBSQRQRHKeHAjH_22MxqVk-yD9piam3T7A",
    authDomain: "energize-electrical-service.firebaseapp.com",
    projectId: "energize-electrical-service",
    storageBucket: "energize-electrical-service.firebasestorage.app",
    messagingSenderId: "488528476137",
    appId: "1:488528476137:web:88e77de963f04d30e27d78",
    measurementId: "G-7MQR86TDCF"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // üîß EmailJS init
  emailjs.init("NAqbqXyEwgThxJl0F");

  function trimiteRecenzie(event) {
    event.preventDefault();
    const name = document.getElementById("name").value;
    const message = document.getElementById("message").value;
    const rating = document.getElementById("rating").value;

    db.collection("recenzii").add({
      name: name,
      message: message,
      rating: rating,
      date: firebase.firestore.FieldValue.serverTimestamp()
    }).then(() => {
      emailjs.send("service_ypfc8wi", "template_yvtix0b", {
        name: name,
        message: message,
        rating: rating,
        to_email: "contact@energize.ro, borbedarius36@gmail.com"
      }).then(function(response) {
        document.getElementById("confirmare").style.display = "block";
      }, function(error) {
        alert("Recenzia a fost salvatƒÉ, dar emailul nu s-a trimis.");
        console.error("Eroare email:", error);
      });
    });
  }
</script>

</body>
</html>
